# 综述:Mbed 恩智浦 LPC1768 微控制器

> 原文:[https://hack aday . com/2009/11/21/review-mbed-nxp-LPC 1768-微控制器/](https://hackaday.com/2009/11/21/review-mbed-nxp-lpc1768-microcontroller/)

![](../Images/c76b5b5b5a0df9ca4c5b45c649c27b63.png "mbed")

*[mbed](http://mbed.org/)* 是下一代 32 位微控制器平台。这是一个原型和教学工具，有点类似 Arduino。服用类固醇。有爪子和尖牙。该类中的其他竞争者包括 MAKE Controller、STM32 Primer 和 Primer 2、Freescale Tower 和 Microchip 的 PIC32 初学者工具包。与这些其他平台相比，mbed 硬件有许多优势(也有一些劣势)，但真正让它与众不同的是开发环境:整个系统——编辑器、编译器、库和参考资料——完全基于网络。主机系统上不需要安装或维护任何软件。

## 硬件

mbed 板的合理定价为 60 美元；在同行中处于中间位置。mbed 的尺寸(或尺寸不足)是其最大的优势之一，在一个坚固的 40 引脚 DIP 封装中仅测量了大约 1 英寸乘 2 英寸(26 x 52mm 毫米),勉强能够放入[试验板](http://hackaday.com/2005/10/21/solderless-breadboard-transporter/)…这是一个重大胜利。

电路板的顶部由微控制器本身控制:一个 60MHz 的恩智浦 LPC1768，基于功能强大的 32 位 ARM Cortex-M3 内核，配备 64K RAM 和 512K flash，并配备了丰富的外设:以太网、USB(主机、设备和 to-go)、CAN 总线、多个串行、I2C 和 SPI 总线、12 位 A/D，甚至 10 位 D/A 转换器和实时时钟/日历。顶部还有 USB 连接器(mini-B)、一些电源调节电路(在 4.5 至 9 伏 DC 或 USB 电源下工作)、几个指示灯和复位按钮(我们购买的设备上的普通触觉开关，而不是产品照片中看到的糖果般的蓝色按钮)。

[![](../Images/684e0e67f91b56e5a3fe50fc7d08ee10.png "mbed-pinouts")T2】](http://hackaday.com/files/2009/11/mbed-pinouts1.png)

底部隐藏了一个以太网收发器芯片(只需添加一个 RJ45 插孔即可将板接入网络)和一个 DiskOnChip 风格的组件，当通过 USB 连接到主机系统时，该组件提供了一个小的(约 2MB) FAT 文件系统，很像拇指驱动器。

后一个特性 FAT 文件系统——是 mbed 无软件、跨平台魅力的一半关键。将新代码加载到设备上只需将编译好的程序(作为. bin 文件)复制到这个驱动器即可。按下复位按钮，新代码被复制到 MCU 的内部闪存并运行。没有专门的[编程硬件加密狗](http://hackaday.com/2009/11/18/pic-powered-avr-programmer/)，没有专门的 bootloader 软件，只是拖拽。这有一些严重的影响。几乎所有的*系统都可以挂载一个 FAT 文件系统。我们不仅仅是在谈论让 Mac 和 Linux 用户与 Windows 一起进入市场……还有即将到来的轻量级上网本浪潮，这些上网本采用 ARM 和 VIA 芯片，运行独特的即时操作系统。或者是 [OLPC XO-1](http://hackaday.com/2008/05/21/hacking-the-olpc-now-and-the-future/) 。或者更老的 PowerPC Macs。学校实验室里不允许安装任何软件的电脑。游戏机。*

## 软件

“[云计算](http://hackaday.com/2009/09/19/jolicloud-os-seeks-to-move-past-browsers/)”仍然是本周的热门词汇，mbed 项目全心全意地采用了这一概念，构成了他们无软件战略的另一半。使用 mbed 的一切——*一切，*甚至你自己的源代码——都驻留在他们的服务器上，可以通过网络浏览器访问。这带来了任何其他基于网络的服务如谷歌文档的优点和缺点。这有可能成为教学和合作的绝佳工具，事实上他们[已经为 mbed](http://mbed.org/) 创建了这样一个在线社区，有论坛和可公开共享的代码库。一个人可以在家里和办公室之间移动，或者[环游世界](http://hackaday.com/2009/09/18/vintage-video-computing-across-america/)，并在任何一个有可靠网络连接的系统上继续编辑代码。无需检查软件更新；服务器将始终是最新的。

[![](../Images/32683fd15ff15a6bfe05d461fb7048f5.png "mbed-editor")T2】](http://hackaday.com/files/2009/11/mbed-editor.png)

mbed 程序是用 C++(是的，谢天谢地是“程序”和“C++”，而不是“草图”或“mbed 语言”)编写的，使用的是基于 [JavaScript](http://hackaday.com/2008/10/18/chrome-and-firefox-showing-javascript-improvements/) 的在线编辑器。准备好后，点击*编译*按钮。编译器和链接器运行在后端，在网络连接另一端的服务器上。如果您的代码在语法上是有效的，那么编译后的。然后，bin 文件将被下载到您的计算机…保存到 mbed USB 磁盘，按下重置按钮，您就可以开始了。在类似 Arduino 的方式中，mbed 设备也以虚拟 COM 端口的形式出现，因此您可以使用任何终端程序来监控程序的串行输出。

## 好人

我们被教导说，在批评之前，你应该总是说一些友好的话，所以我们要指出，事实上，上述过程确实非常有效，并且被证明是既快速又可靠的。一旦你进入了最佳状态，操作序列并不比 Arduino 或任何其他微控制器专用的程序员加密狗更麻烦。

值得称赞的是，与一些微控制器评估套件不同，mbed 编译器没有人为限制；处理器的全部代码和内存空间可供您的代码使用。该编辑器具有实时语法着色和多个撤销级别。双击编译器输出中的错误消息会直接将您带到出错的行，就像在任何像样的 IDE 中一样。您可以将现有代码从本地系统导入 mbed“云”，或者导出单个文件或整个项目。都是好东西。

这种设置的真正可取之处是库，既有他们所谓的“[手册](http://mbed.org/handbook/)”中的官方功能，也有“[食谱](http://mbed.org/projects/cookbook/)中的社区贡献代码大量的功能已经以简洁且通常面向对象的方式实现了。有时候，在与其他微控制器一起工作并准备好一些预期的编码噩梦之后，却发现相应的库只用几行代码就处理了一个任务，这几乎是滑稽可笑的(浏览手册和食谱中的例子)。对于文件访问、字符 I/O、实时时钟访问等，也有遵循 stdlib 或“类 UNIX”约定的趋势。因此，对微控制器不熟悉的现有系统程序员会感觉就像在家里一样，没有奇怪的函数名或语法。

mbed 的 FAT 文件系统也可由微控制器访问，这使得它不仅可用于程序存储。网页可以从这个空间提供，或者一个[数据记录](http://hackaday.com/2009/08/14/logging-weight-changes/)程序可以在这里存储结果。如果两兆字节的容量对你的需求来说太有限，看看食谱中的 [SDCard 库](http://mbed.org/projects/cookbook/wiki/SDCard)——连接和使用它几乎是微不足道的。几乎所有的*图书馆都是那样的！*

## 坏的和丑的

硬件方面，只有几个小问题:

首先是本地 FAT 文件系统。尽管这是该设备最独特的特性之一，也是支持其平台中立性的东西，但这种实现似乎有点不合时宜。前面提到的 SDCard 库展示了这种格式的易用性。它的速度更快，具有更大容量的潜力，而且卡可以很容易地更换成不同的代码或数据文件。不是很失望，只是似乎错过了一个让这个产品变得更好的机会。

第二个是板上的指示灯。其中四个相距不到几毫米， *[都是蓝色的](http://hackaday.com/2008/09/30/6-pcs-in-one-clear-case/)*……从房间的另一端看，它们作为状态指示器几乎毫无价值，在那里它们都模糊成一个单独的斑点。十年前，蓝色发光二极管还是*的新奇事物。*五年前，它们是*主流，*装饰着每一个 USB 集线器、鼠标、闪存盘和进口的垃圾。今天他们只是累了，让我们克服它吧。不同的颜色在远处一眼就能看出身份。

最后，mbed 板本身没有问题，但很高兴看到 Cookbook 项目之一“BoB2”分线板成为可用产品。空白板可以通过 [BatchPCB](http://hackaday.com/2009/03/11/batchpcb-now-even-more-a-la-carte/) 订购，但是除去邮费和手续费，空白板的价格是 33 美元。进行组装和大规模生产，将它与 mbed 捆绑在一个 100 美元的封装中，这听起来像是一个成功的设置，可以与 MAKE 控制器正面交锋。

但是真的，那些只是吹毛求疵。我们真正的问题在于软件……特别是代码编辑器。如果你发现 Arduino 编辑器令人厌烦，mbed 编辑器会让你看到红色(或者如果你考虑到所有那些蓝色 led，可能是紫色)。像 Arduino 一样，没有真正的标签格式；一切都扩展到空间，不管你喜欢与否。自动缩进不能被禁用，似乎也没有增加或减少代码块缩进的命令。如果您习惯于使用箭头键来移动和单击并拖动来突出显示文本，那么编辑器会忽略许多系统原生的编辑行为，这些行为可能已经深深植根于您的记忆中(例如按住 shift 键单击来选择一个范围的文本，或者连续三次单击并拖动多行文本)。此外，不同浏览器和操作系统的古怪行为也略有不同。甚至不要*尝试 Mac 版火狐浏览器中的*三次点击-拖动……如果不完全重启，你将无法找回你的文本光标(说真的，仅仅重启浏览器是不够的)。而且目前只支持最常用的浏览器；所有其他人目前都被拒之门外。

这些工具的闭源特性也可能让一些人感到不快。如果有人觉得 Arduino 编辑器令人生厌，有一些选择:进入那里并更改代码，或者简单地使用不同的编辑器并手动链接 Arduino 库……这都是合法的，并且受到鼓励。有了 mbed，就没有其他选择了。对编译器和库的访问是“像啤酒一样免费”，但不是“像演讲一样免费”如果服务被关闭，或者如果他们突然开始收取订阅费(没有迹象表明这是计划中的，只是一个假设的场景)，几乎没有任何追索权。

好消息是，至少就前者而言，软件当然比硬件更具可塑性，而且几乎可以肯定工具会随着时间的推移而改进。该网站正在积极开发中…新的“家庭”和“笔记本”功能昨天刚刚为注册用户增加。或许，假以时日，他们会让 Command 键在 Mac 上正常工作。无论如何，用户提交的代码的选择范围将会扩大，使得使用该板做更多不同的事情变得越来越容易。

## 概括起来

mbed Tour 页面坦率地说明了该平台的优势和劣势。mbed 旨在作为一种快速原型制作和教育工具，在这一点上它表现出色。缺少诸如调试器或离线编译器之类的特性使它无法成为一个专业水平的开发平台，这没什么。就当是 Arduino:下一代吧。虽然 mbed 板的前期成本比 Arduino 高，但这里有一些功能需要昂贵的“屏蔽”,并占用 8 位 ATmega328 处理器的每个字节和 CPU 周期:以太网、USB、SD 卡……mbed 沉着应对这些任务。

mbed 并不是没有缺陷，而且“云”开发方法可能永远不会适合某些人。对于一个才进行了几周测试的产品来说，目前的结果非常令人鼓舞。这里有巨大的潜力:一个非常强大的芯片，易于接口和编程。如果在线工具能够得到改进，或者如果开源替代品变得可用，mbed 可能会成为主要参与者。我们希望在未来的黑客攻击中看到更多这种设备。