# 25C3:入侵 IPhone

> 原文:[https://hackaday.com/2008/12/28/25c3-hacking-the-iphone/](https://hackaday.com/2008/12/28/25c3-hacking-the-iphone/)

正如来自 [iphone 开发团队](http://blog.iphone-dev.org/)的 [yellowsnow demo](http://hackaday.com/2008/12/21/iphone-3g-unlock-video/) 、【pytey】、【MuscleNerd】和【planetbeing】在 [25C3](http://hackaday.com/tag/25c3) 展示他们的工作[黑掉 iPhone](http://events.ccc.de/congress/2008/Fahrplan/events/2976.en.html) 时所承诺的那样。该团队最初成立于 2007 年，这是迄今为止关于 iPhone[如何被攻破的最全面的介绍。你可以在上面找到全文。](http://www.mahalo.com/IPhone_3G)

他们以一些关于他们的软件有多受欢迎的统计数据开始。到目前为止，我们最喜欢的是，至少有 180 名拥有苹果公司知识产权的人定期使用开发团队的软件更新他们的手机。从那以后，演讲分为两个部分:破解 S5L 应用处理器和解锁 S-Gold 基带处理器。

这款手机依靠信任链来保证只有苹果的代码在上面运行。内核对所有用户域进行签名检查。iboot 加载内核时会检查内核。LLB 加载 iboot 映像时会检查它。LLB 由最底层的代码 bootrom 从 NOR 加载。这就是事情分崩离析的地方；bootrom 不会检查 LLB 的签名。为了利用这一点，该团队在 DFU 模式下发现了他们所描述的经典堆栈缓冲区溢出。DFU 是设备固件升级模式，在 bootrom 加载后，手机可以强制进入这种状态。他们的利用迫使证书检查返回“真”。然后，他们能够修补手机系统中所有后续的签名检查。

基带处理器被证明要困难得多，因为它没有任何恢复模式；屏蔽电话总是有可能的。S-Gold 是一个完整的片上系统，每部手机都有一个唯一的 ID。NOR 在每部手机上都有一个唯一的 ID。这两个 id 用于签署 secpack，sec pack 反过来强制 SIM 卡运营商锁定。这些唯一的 id 就是为什么你不能拿一个官方解锁的手机并复制它的 secpack 来解锁另一部手机。其他一切都是一样的:固件，基带，启动室都是一样的。在第二代 iPhone 上，bootrom 会检查引导加载程序。然后，引导加载程序在检查和加载固件之前验证 bootrom。固件强制实施载体锁定。团队认为不值得尝试打破信任链。他们开发的 SIM 解锁码分为两部分。第一部分是实际的软件解锁。当固件在 RAM 中运行时，他们会对其进行修补。他们的补丁修改了固件关于是否强制运营商锁定的决策树。后半部分是允许他们注入代码的漏洞。该团队知道，苹果可以并且很可能会修补漏洞，但他们的 RAM 修补代码将始终工作，因此只需找到另一个漏洞来应用它。为了做一个永久的解锁解决方案(就像第一代 iPhone)，他们需要分析实际的 bootrom 代码。

该团队提到了苹果做的几件事，这些事实际上帮助了他们的努力。安全措施逐渐展开，因此他们能够看到最终会被隐藏的东西。固件最初是未加密的。早期版本信任 iTunes，他们可以很容易地修改它。所有 userland 应用程序最初都以根用户身份运行，这意味着任何应用程序漏洞都会给予根用户级别的访问权限。

iphone 开发团队确实付出了巨大的努力，我们期待 yellowsn0w 在新年前夕发布。